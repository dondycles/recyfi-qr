<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="qrcode.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.8/download.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: "#2F2C2C",
                        grn: "#5C8758",
                        brn: "#A66D6D",
                    },
                },
            },
        }
    </script>



    <title>Register</title>
</head>

<body>
    <main class=" min-h-screen py-10 flex flex-col h-full max-w-full items-center justify-center gap-6">

        <div class="flex flex-col items-center">
            <p class=" font-thin max-w-[300px] text-justify">Please Screenshot your QR code. This will serve as your key
                to log in to
                your account in the future</p>
            <img class="h-[200px] w-[210px]" src="../imgs/recycle-png.webp"></img>
        </div>

        <div class="flex flex-col items-center gap-4">
            <input id="text" type="text" class=" w-fit text-center bg-transparent text-white" />
            <div id="qrcode" class=" w-[100px] md:w-[200px] h-[100px] md:h-[200px] "></div>

        </div>

        <div class="flex flex-col gap-2 items-center">
            <button id="recreateBtn" onclick=makeCode()
                class=" w-[200px] bg-grn w-fit py-2 rounded-xl active:bg-yellow-700 hover:bg-green-600 transition-all duration-150 ease-in-out">
                Recreate
            </button>
            <button id="register"
                class=" w-[200px] bg-grn w-fit  py-2 rounded-xl active:bg-yellow-700 hover:bg-green-600 transition-all duration-150 ease-in-out">
                Register
            </button>
        </div>


    </main>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBnf96jY9yVZQUa4thP8nbCrZ5AQwzr_s8",
        authDomain: "recyfi-v2.firebaseapp.com",
        databaseURL: "https://recyfi-v2-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "recyfi-v2",
        storageBucket: "recyfi-v2.appspot.com",
        messagingSenderId: "1041018790428",
        appId: "1:1041018790428:web:6d02558b1b86dce87135d9",
        measurementId: "G-7PKPZKPEG8"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

    document.getElementById("register").addEventListener('click', writeUserData);


    function writeUserData() {
        const uniqueKey = document.getElementById("text").value;
        console.log(uniqueKey);
        const db = getDatabase();
        set(ref(db, uniqueKey), {
            point: 0
        });
    }

    writeUserData();
</script>
<script type="text/javascript">
    var qrcode = new QRCode(document.getElementById("qrcode"), {
        width: 300,
        height: 300
    });
    function makeCode() {
        const uniqueCode = Math.random().toString(36).slice(2) +
            Math.random().toString(36)
                .toUpperCase().slice(2);
        document.getElementById("text").value = uniqueCode;
        qrcode.makeCode(uniqueCode);
    }
    makeCode();

    function download() {
        var qr = document.getElementById("qrcode");

    }
</script>

</html>